import axios from"axios";const API_URL="http://localhost/dolibarr/htdocs/api/index.php/products",API_KEY="DSAxxkghj9N6SNub050NEi46kc1EF16L";export async function getProduitsAVendre(){const config={headers:{DOLAPIKEY:API_KEY,Accept:"application/json"},params:{sortfield:"t.ref",sortorder:"ASC",limit:100,sqlfilters:"(t.tosell:=:1)"}};try{const response=await axios.get(API_URL,config);return console.log("Produits à vendre récupérés :",response.data),response.data}catch(error){return error.response?(console.error("Erreur du serveur:",error.response.status),console.error("Détails de l'erreur:",error.response.data)):error.request?console.error("Aucune réponse du serveur:",error.request):console.error("Erreur dans la requête :",error.message),[]}}export async function getById(productId){const config={headers:{DOLAPIKEY:API_KEY,Accept:"application/json"},params:{sortfield:"t.ref",sortorder:"ASC",limit:100}};try{const response=await axios.get(`${API_URL}/${productId}`,config);return console.log("Produit récupéré :",response.data),response.data}catch(error){return error.response?(console.error("Erreur du serveur:",error.response.status),console.error("Détails de l'erreur:",error.response.data)):error.request?console.error("Aucune réponse du serveur:",error.request):console.error("Erreur dans la requête :",error.message),null}}export async function setNote(productId,valeurNote){try{const payloadOrder={array_options:{options_notep:valeurNote}},config={headers:{DOLAPIKEY:API_KEY,"Content-Type":"application/json"}},orderResponse=await axios.put(`${API_URL}/${productId}`,payloadOrder,config);if(200!==orderResponse.status)throw new Error(`Erreur lors de la création de la commande : ${orderResponse.statusText}`)}catch(error){return error.response?console.error(`Erreur du serveur (HTTP ${error.response.status}) :`,error.response.data):error.request?console.error("Aucune réponse du serveur :",error.request):console.error("Erreur lors de la requête :",error.message),null}}export async function calculeMoyenneNote(productId,valeurNote){return((await getById(productId)).array_options.options_notep+valeurNote)/2}